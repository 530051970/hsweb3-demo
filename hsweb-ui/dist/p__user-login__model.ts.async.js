(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{Dh86:function(t,e,r){"use strict";r.r(e);var n=r("p0pE"),a=r.n(n),s=r("d6i3"),p=r.n(s),f=r("7DNP"),l=r("Qyje");var u=r("1l/V"),c=r.n(u),o=r("sy1d");function i(t){return d.apply(this,arguments)}function d(){return(d=c()(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.a)("/api/login/captcha?mobile=".concat(e)));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}function h(t){return w.apply(this,arguments)}function w(){return(w=c()(p.a.mark(function t(e){return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Object(o.a)("/hsweb/authorize/login",{method:"POST",data:e}));case 1:case"end":return t.stop()}},t)}))).apply(this,arguments)}var b=r("xKgJ"),y=r("eTk0"),g={namespace:"userLogin",state:{status:void 0},effects:{login:p.a.mark(function t(e,r){var n,a,s,u,c,o,i;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a=r.call,s=r.put,t.next=4,a(h,n);case 4:return u=t.sent,t.next=7,s({type:"changeLoginStatus",payload:u});case 7:return t.next=9,s({type:"user/saveCurrentUser",payload:u.result.user});case 9:if(200!==u.status){t.next=27;break}if(Object(b.c)(u.result.token),Object(b.d)(u.result),Object(y.b)(),c=new URL(window.location.href),o=Object(l.parse)(window.location.href.split("?")[1]),!(i=o.redirect)){t.next=25;break}if(new URL(i).origin!==c.origin){t.next=23;break}(i=i.substr(c.origin.length)).match(/^\/.*#/)&&(i=i.substr(i.indexOf("#")+1)),t.next=25;break;case 23:return window.location.href=i,t.abrupt("return");case 25:return t.next=27,s(f.routerRedux.replace(i||"/"));case 27:case"end":return t.stop()}},t)}),getCaptcha:p.a.mark(function t(e,r){var n,a;return p.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.payload,a=r.call,t.next=4,a(i,n);case 4:case"end":return t.stop()}},t)})},reducers:{changeLoginStatus:function(t,e){var r=e.payload;return function(t){var e="string"==typeof t?[t]:t;localStorage.setItem("antd-pro-authority",JSON.stringify(e))}(r.currentAuthority),a()({},t,{status:r.status,type:r.type})}}};e.default=g}}]);